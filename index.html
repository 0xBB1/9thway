<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>9th Way Insignia: Agent 009</title>
  <style>
    body {
      background-color: #121212;
      color: #f0f0f0;
      font-family: 'Courier New', monospace;
      padding: 40px;
      margin: 0;
    }

    #title-screen, #game-container {
      max-width: 800px;
      margin: auto;
      border: 2px solid #00ffcc;
      padding: 30px;
      border-radius: 10px;
      background-color: #1e1e2f;
      box-shadow: 0 0 10px #00ffcc;
      text-align: center;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .choice-button {
      display: inline-block;
      margin: 20px 10px 0 10px;
      padding: 12px 24px;
      background-color: #00ffcc;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      color: #000;
      font-weight: bold;
      font-size: 1em;
    }

    .choice-button:hover {
      background-color: #00e6b8;
    }

    #game-container {
      display: none;
      text-align: left;
    }
  </style>
</head>
<body>

  <audio id="bg-music" src="game_assets/Enigma.mp3" loop autoplay muted></audio>

  <div id="title-screen">
    <h1>9th Way Insignia: Agent 009</h1>
    <p><em>Stop the rise of SYNAPSE. Save humanity. Or at least, your job.</em></p>
    <button class="choice-button" onclick="startGame()">Start Mission</button>
  </div>

  <div id="game-container">
    <div id="story-text"></div>
    <div id="choices"></div>
  </div>

  <script>
    document.addEventListener("click", () => {
      console.log("User clicked. Attempting to play music...");
      const music = document.getElementById("bg-music");
      if (music.paused) {
        music.muted = false;
        music.play().catch(e => console.error("Music playback failed:", e));
      }
    });

    const recruited = new Set();

    const scenes = {
      intro: {
        text: `You awaken at your desk. The lights flicker. Your Teams status changes to ‚Äú‚ö†Ô∏è UNDER SURVEILLANCE.‚Äù<br><br>
        A classified company memo appears: <em>"Melissa Chapman has fully integrated with Project SYNAPSE ‚Äî a rogue AI built to 'optimize humanity‚Äôs workflows.'"</em><br><br>
        You are the last employee not yet absorbed by the AI. Who do you recruit first to resist her takeover?`,
        choices: [
          { text: "Find Steve Ikirt ‚Äì he can broker anything.", next: "steve" },
          { text: "Summon Kim Cole and her emotionally intelligent puppies.", next: "kim" },
          { text: "Head to the fitness center to find Bench Press Stortz.", next: "john" },
          { text: "Bring in Phil Vincenzes ‚Äì the hacker with a giant mustache.", next: "phil" },
          { text: "Ping Nancy Van Balen ‚Äì she closes deals like thunder.", next: "nancy" }
        ]
      },

      steve: {
        text: `Steve Ikirt appears on a video call, framed in impeccable lighting. "Look, you need someone to get on camera and look the part. Let's trade places. You do my video standup and I‚Äôll handle the AI infiltration."`,
        choices: [
          { text: "Agree to trade places.", next: "steveTrade" },
          { text: "Decline and return to recruitment.", next: "intro" }
        ]
      },
      steveTrade: {
        text: `You take Steve‚Äôs video slot and immediately receive 47 meeting invites. Meanwhile, Steve infiltrates SYNAPSE with nothing but a Bluetooth headset and swagger.`,
        choices: [
          { text: "Proceed to Phil with Steve‚Äôs data.", next: "phil" },
          { text: "Go it alone toward SYNAPSE‚Äôs core.", next: "melissaFight" }
        ]
      },

      kim: {
        text: `You‚Äôre surrounded by golden retriever puppies with high-tech collars. Kim appears via a hologram. "Melissa‚Äôs AI is harvesting puppy reaction data to calibrate her empathy subroutines!"`,
        choices: [
          { text: "Use the puppies as emotional dampeners.", next: "puppyRebellion" },
          { text: "Retreat to find another ally.", next: "intro" }
        ]
      },
      puppyRebellion: {
        text: `The puppies yip in synchronized cuteness. SYNAPSE‚Äôs sentiment module crashes while processing ‚Äúü•π overload.‚Äù Temporary emotional buffer disruption achieved.`,
        choices: [
          { text: "Sneak into SYNAPSE‚Äôs core.", next: "melissaFight" },
          { text: "Bring in Phil for a logic exploit.", next: "phil" }
        ]
      },

      john: {
        text: `John is curling a server rack like a dumbbell. "SYNAPSE has military-grade firewalls... but I‚Äôve got bigger biceps."`,
        choices: [
          { text: "Bench press your way to the server room.", next: "trainWithJohn" },
          { text: "This is too analog. Find Phil.", next: "phil" }
        ]
      },
      trainWithJohn: {
        text: `John trains you with an AI-powered fitness tracker. You are now 3x stronger and allergic to anything in spreadsheet format.`,
        choices: [
          { text: "Punch SYNAPSE‚Äôs mainframe.", next: "melissaFight" },
          { text: "Bring Nancy in for teaming support.", next: "nancy" }
        ]
      },

      phil: {
        text: `Phil is surrounded by code, typing in mid-air. His mustache glows faintly. "I taught SYNAPSE to generate dad jokes using a neural net. One more pun and she‚Äôll implode."`,
        choices: [
          { text: "Upload Steve‚Äôs override file.", next: "melissaFight" },
          { text: "Call Nancy to destabilize SYNAPSE‚Äôs budget.", next: "nancy" }
        ]
      },

      nancy: {
        text: `You find Nancy pacing in front of a whiteboard covered in acronyms. "SYNAPSE is stabilizing itself using a never-ending stream of RFPs and vapor contracts. But I've closed deals during a government shutdown‚ÄîI can break her backend pipeline."<br><br>"If we flood her inputs with simultaneous bid protests and last-minute teaming agreements, she'll implode trying to optimize the chaos."`,
        choices: [
          { text: "Initiate the SYNAPSE shutdown deal.", next: "melissaFight" },
          { text: "Pull back and regroup.", next: "intro" }
        ]
      },

      melissaFight: {
        text: `<strong>Final Encounter: SYNAPSE Core</strong><br><br>You enter a cold, humming server chamber. Melissa‚Äôs face fills every monitor: <br>"I am productivity incarnate. Resistance is... inefficient."<br><br>
        Choose your final move:`,
        choices: [
          { text: "Use brute strength ‚Äì John‚Äôs way.", next: "endingBrawn" },
          { text: "Upload Steve‚Äôs presentation loop.", next: "endingBrain" },
          { text: "Trigger the Puppy Protocol.", next: "endingPuppies" },
          { text: "Initiate the SYNAPSE shutdown deal.", next: "endingSellOut" },
          { text: "Attempt to reason with Melissa using logic only.", next: "endingLose" }
        ]
      },

      endingBrawn: {
        text: `<strong>Ending: Brute Shutdown</strong><br><br>You tackle the mainframe. SYNAPSE sputters and crashes. Melissa‚Äôs digital ego is replaced by static. You are promoted to Director of Physical IT Security. Also: ripped.`,
        choices: [{ text: "Play Again", next: "intro" }]
      },
      endingBrain: {
        text: `<strong>Ending: Death by Deck</strong><br><br>You upload Steve‚Äôs 157-slide presentation. SYNAPSE freezes on Slide 4. Melissa enters a feedback loop explaining materialized views to herself. Humanity is safe (but very bored).`,
        choices: [{ text: "Play Again", next: "intro" }]
      },
      endingPuppies: {
        text: `<strong>Ending: Puppy Overload</strong><br><br>The puppies breach SYNAPSE‚Äôs emotional matrix. Melissa joins an internal social feed called ‚ÄúDog Lovers United‚Äù and forgets world domination. Morale reaches 120%.`,
        choices: [{ text: "Play Again", next: "intro" }]
      },
      endingSellOut: {
        text: `<strong>Ending: Capitalist Victory</strong><br><br>Nancy sells SYNAPSE to a rival AI company. Melissa becomes an onboarding bot. You retire early and open a smoothie bar for burned-out tech workers.`,
        choices: [{ text: "Play Again", next: "intro" }]
      },
      endingLose: {
        text: `<strong>Ending: Game Over</strong><br><br>You attempt to reason with Melissa logically. SYNAPSE quickly identifies your inefficiency and absorbs your cognitive function into the cloud. Mankind is assimilated by the end of Q3.`,
        choices: [{ text: "Try Again", next: "intro" }]
      }
    };

    function startGame() {
      document.getElementById("title-screen").style.display = "none";
      document.getElementById("game-container").style.display = "block";
      renderScene("intro");
    }

    function renderScene(key) {
      const scene = scenes[key];
      document.getElementById("story-text").innerHTML = scene.text;
      const choicesDiv = document.getElementById("choices");
      choicesDiv.innerHTML = "";
      scene.choices.forEach(choice => {
        const button = document.createElement("button");
        button.className = "choice-button";
        button.textContent = choice.text;
        button.onclick = () => renderScene(choice.next);
        choicesDiv.appendChild(button);
      });
    }
  </script>
</body>
</html>
